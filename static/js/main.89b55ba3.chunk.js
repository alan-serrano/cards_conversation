(this.webpackJsonpconversation_cards=this.webpackJsonpconversation_cards||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(9),c=a.n(r),l=(a(94),a(14)),o=a(7),s=(a(95),a(30)),u=a(27);var f=function(){return i.a.createElement("div",{className:"edit-page"},"P\xe1gina Edit")},d=(a(96),a(97),a(142)),m=a(147),p=a(148),g=a(162),v=a(149),E=a(43),b=a(145),h=a(53),O=a.n(h),j=a(144),y=Object(d.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},content:{marginTop:"20px"}}})),S=i.a.forwardRef((function(e,t){return i.a.createElement(j.a,Object.assign({direction:"up",ref:t},e))}));var I=function(e){var t=e.children,a=e.Icon,n=e.dataIsReady,r=y(),c=i.a.useState(!1),l=Object(o.a)(c,2),s=l[0],u=l[1],f=function(){u(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{disabled:!n,style:n?{color:"#F44336"}:{},"aria-label":"help",onClick:function(){u(!0)}},i.a.createElement(a,null)),i.a.createElement(g.a,{fullScreen:!0,open:s,onClose:f,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",TransitionComponent:S},i.a.createElement(m.a,{className:r.appBar},i.a.createElement(p.a,null,i.a.createElement(b.a,{edge:"start",color:"inherit",onClick:f,"aria-label":"close"},i.a.createElement(O.a,null)),i.a.createElement(E.a,{variant:"h6",className:r.title},"Help"))),i.a.createElement(v.a,{className:r.content},t)))},z=a(56);a(102),a(104);z.initializeApp({apiKey:"AIzaSyBJmgMqOrcOQBg3-JvswwmqlLCvbIAIoeY",authDomain:"cards-conversation-starters.firebaseapp.com",databaseURL:"https://cards-conversation-starters.firebaseio.com",projectId:"cards-conversation-starters",storageBucket:"cards-conversation-starters.appspot.com",messagingSenderId:"1037492872627",appId:"1:1037492872627:web:9af0f2901b3655cb7357c6",measurementId:"G-HSK36FCQYP"});z.auth;var x=z.database(),C=a(151),T=a(164),F=a(152),Q=a(165),k=a(150),D=a(159),M=a(153),N=a(76),w=a.n(N),q=a(75),R=a.n(q),A=Object(d.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},content:{marginTop:"20px"},divider:{marginBottom:e.spacing(1)}}})),L=i.a.forwardRef((function(e,t){return i.a.createElement(j.a,Object.assign({direction:"up",ref:t},e))}));function B(e){var t=A(),a=e.normalizedDifficulties,n=e.difficultyStates,r=e.setDifficultyStates,c=e.normalizedTopics,s=e.topicStates,u=e.setTopicStates,f=i.a.useState(!1),d=Object(o.a)(f,2),m=d[0],p=d[1],g=i.a.useState(!1),v=Object(o.a)(g,2),E=v[0],b=v[1];function h(e,t,a){return e.map((function(e,n){return i.a.createElement(k.a,{control:i.a.createElement(D.a,{checked:t[e.id],onChange:a,name:"".concat(e.id)}),label:e.name,key:n})}))}return i.a.useEffect((function(){Object.values(n).filter((function(e){return e})).length===Object.values(n).length?p(!0):p(!1),Object.values(s).filter((function(e){return e})).length!==Object.values(s).length?b(!1):b(!0)}),[n,s]),i.a.createElement(i.a.Fragment,null,i.a.createElement("form",null,i.a.createElement(C.a,{maxWidth:"xs"},i.a.createElement(T.a,{component:"fieldset"},i.a.createElement(Q.a,{component:"legend"},"Select difficulties"),i.a.createElement(F.a,null,i.a.createElement(k.a,{control:i.a.createElement(D.a,{checked:m,onChange:function(e){if(e.target.checked){var t={};for(var a in n)t[a]=!0;r(t)}else{var i={};for(var c in n)i[c]=!1;r(i)}p(e.target.checked)}}),label:"All"}),h(a,n,(function(e){var t=Object(l.a)({},n);t[e.target.name]=e.target.checked,r(t)})))),i.a.createElement(M.a,{light:!0,className:t.divider}),i.a.createElement(T.a,{component:"fieldset"},i.a.createElement(Q.a,{component:"legend"},"Select topics"),i.a.createElement(F.a,null,i.a.createElement(k.a,{control:i.a.createElement(D.a,{checked:E,onChange:function(e){if(e.target.checked){var t={};for(var a in s)t[a]=!0;console.log(t),u(t)}else{var n={};for(var i in s)n[i]=!1;u(n)}b(e.target.checked)}}),label:"All"}),h(c,s,(function(e){var t=Object(l.a)({},s);t[e.target.name]=e.target.checked,u(t)})))))))}var W=function(e){var t=e.dataIsReady,a=e.topics,n=e.normalizedTopics,r=e.normalizedTopicsMap,c=e.topicFilters,s=e.setTopicFilters,f=e.difficulties,d=e.normalizedDifficulties,h=e.normalizedDifficultiesMap,j=e.difficultyFilters,y=e.setDifficultyFilters,S=Object(u.f)().id,I=A(),z=i.a.useState(!1),C=Object(o.a)(z,2),T=C[0],F=C[1],Q=i.a.useState(),k=Object(o.a)(Q,2),D=k[0],M=k[1],N=i.a.useState(),q=Object(o.a)(N,2),W=q[0],P=q[1];i.a.useEffect((function(){M(Object(l.a)({},j)),P(Object(l.a)({},c))}),[j,c]);var G=function(){F(!1),M(Object(l.a)({},j)),P(Object(l.a)({},c))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{disabled:!t,style:t?{color:"#F44336"}:{},"aria-label":"settings",onClick:function(){F(!0)}},i.a.createElement(R.a,null)),i.a.createElement(g.a,{fullScreen:!0,open:T,onClose:G,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",TransitionComponent:L},i.a.createElement(m.a,{className:I.appBar},i.a.createElement(p.a,null,i.a.createElement(b.a,{edge:"start",color:"inherit",onClick:G,"aria-label":"close"},i.a.createElement(O.a,null)),i.a.createElement(E.a,{variant:"h6",className:I.title},"Settings"),i.a.createElement(b.a,{edge:"start",color:"inherit",onClick:function(){if(F(!1),void 0!==S){var e=x.ref("parties/".concat(S,"/topics")),t=x.ref("parties/".concat(S,"/difficulties"));e.set(Object(l.a)({},W)),t.set(Object(l.a)({},D))}else y(Object(l.a)({},D)),s(Object(l.a)({},W))},"aria-label":"close"},i.a.createElement(w.a,null)))),i.a.createElement(v.a,{className:I.content},i.a.createElement(B,{topics:a,normalizedTopics:n,normalizedTopicsMap:r,topicStates:W,setTopicStates:P,difficulties:f,normalizedDifficulties:d,normalizedDifficultiesMap:h,difficultyStates:D,setDifficultyStates:M}))))},P=a(154),G=a(155),J=a(157),H=a(77),U=a.n(H),K=a(156),Y=Object(d.a)((function(e){return{flex:{display:"flex",alignItems:"center"},flexGrow:{flexGrow:1},capitalize:{textTransform:"capitalize",textAlign:"center"}}}));var _=function(e){var t=e.dataIsReady,a=e.question,n=e.title,r=e.help,c=e.topics,l=e.normalizedTopics,o=e.normalizedTopicsMap,s=e.topicFilters,u=e.setTopicFilters,f=e.setCurrentTopic,d=e.difficulties,m=e.normalizedDifficulties,p=e.normalizedDifficultiesMap,g=e.difficultyFilters,v=e.setDifficultyFilters,b=e.currentQuestions,h=e.currentQuestionsMap,O=e.currentQuestion,j=e.setCurrentQuestion,y=Y();return i.a.createElement("div",{className:"card-component"},i.a.createElement(P.a,{className:y.root},i.a.createElement(G.a,{classes:{title:y.flex},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(W,{dataIsReady:t,topics:c,normalizedTopics:l,normalizedTopicsMap:o,topicFilters:s,setTopicFilters:u,setCurrentTopic:f,difficulties:d,normalizedDifficulties:m,normalizedDifficultiesMap:p,difficultyFilters:g,setDifficultyFilters:v,currentQuestions:b,currentQuestionsMap:h,currentQuestion:O,setCurrentQuestion:j}),i.a.createElement(E.a,{variant:"h5",className:"".concat(y.capitalize," ").concat(y.flexGrow)},n||i.a.createElement(K.a,{animation:"wave",width:"60%",height:"1em",style:{margin:"0 auto"}})),i.a.createElement(I,{Icon:U.a,dataIsReady:t},i.a.createElement(C.a,{maxWidth:"sm"},r)))}),i.a.createElement(J.a,null,i.a.createElement(E.a,{variant:"body2",color:"textSecondary",component:"p"},a||i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{animation:"wave"}),i.a.createElement(K.a,{animation:"wave"}),i.a.createElement(K.a,{animation:"wave"}))))))};function V(e,t){return Math.floor((t-e+1)*Math.random()+e)}function X(e){return e[V(0,e.length-1)]}var Z=a(158),$=a(161),ee=a(163),te=a(78),ae=a.n(te),ne=a(79),ie=a.n(ne),re=Object(d.a)((function(e){return{container:{display:"flex",justifyContent:"space-between"}}}));var ce=function(e){var t=e.languageActives,a=e.setLanguageISO,n=e.languageISO,r=e.languages,c=re(),l=Object(u.e)(),s=i.a.useState(),f=Object(o.a)(s,2),d=f[0],g=f[1];function v(e){var t=e.currentTarget.dataset.languageId;a(t),g(null)}return i.a.createElement(m.a,{position:"static"},i.a.createElement(p.a,null,i.a.createElement(C.a,{maxWidth:"xs",className:c.container},i.a.createElement(Z.a,{color:"inherit","aria-label":"menu",onClick:function(){return l.push("/")}},i.a.createElement(ae.a,null)),i.a.createElement(Z.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(e){g(e.currentTarget)}},i.a.createElement(ie.a,null),i.a.createElement("span",{style:{marginLeft:"0.4em"}},n)),i.a.createElement($.a,{id:"languageSelector",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:function(){g(null)}},function(){var e=[];for(var a in t)e.push(i.a.createElement(ee.a,{onClick:v,"data-language-id":a,key:a},i.a.createElement("span",{style:{textTransform:"uppercase",marginRight:"0.5em"}},a),i.a.createElement("span",null,r[a]&&r[a].nativeName)));return e}()))))},le=Object(d.a)((function(e){return{container:{display:"flex",marginTop:"1.2rem",justifyContent:"space-between"},flexSpace:{flexBasis:"calc(33.33% - 0.2rem)"}}}));var oe=function(e){var t=e.setLanguageISO,a=e.languageISO,r=e.languages,c=e.languageActives,l=e.questions,s=e.topics,f=e.normalizedTopics,d=e.normalizedTopicsMap,m=e.topicFilters,p=e.setTopicFilters,g=e.difficulties,v=e.normalizedDifficulties,E=e.normalizedDifficultiesMap,b=e.difficultyFilters,h=e.setDifficultyFilters,O=e.currentQuestions,j=e.currentQuestionsMap,y=e.currentQuestion,S=e.setCurrentQuestion,I=e.dataIsReady,z=Object(u.f)().id,T=le(),F=i.a.useState(),Q=Object(o.a)(F,2),k=Q[0],D=Q[1],M=i.a.useState(),N=Object(o.a)(M,2),w=N[0],q=N[1],R=i.a.useState(),A=Object(o.a)(R,2),L=A[0],B=A[1],W=i.a.useState(),P=Object(o.a)(W,2),G=P[0],J=P[1],H=i.a.useState(),U=Object(o.a)(H,2),K=U[0],Y=U[1];function V(){if(void 0!==z&&I){Y(!0);var e=x.ref("parties/".concat(z,"/currentQuestion")),t=X(O);e.set(t.questionId,(function(e){e||Y(!1)}))}else if(I){var a=X(O);S(a.questionId),q(a.topicId)}}return i.a.useEffect((function(){B(!I),J(!I),Y(!I)}),[I]),Object(n.useEffect)((function(){if(void 0!==z&&I){var e=x.ref("parties/".concat(z));function t(e){var t=e.val();t&&(S(t.currentQuestion),q(l[t.currentQuestion].topicId),h(t.difficulties),p(t.topics),D(!0))}return e.on("value",t,(function(e){console.log("The read failed: "+e.code)})),function(){e.off("value",t)}}}),[I,z,k,l,S,h,p]),i.a.useEffect((function(){if(void 0===z&&void 0!==O&&void 0!==j&&void 0===y){var e=X(O);S(e.questionId),q(e.topicId)}}),[y,O,j,I,z,S]),i.a.useEffect((function(){if(void 0!==y&&I&&!j.hasOwnProperty(y))if(void 0!==z){var e=x.ref("parties/".concat(z,"/currentQuestion")),t=X(O);e.set(t.questionId)}else{var a=X(O);S(a.questionId),q(a.topicId)}}),[O,j,y]),i.a.createElement("div",{className:"party-page"},i.a.createElement(ce,{languages:r,languageActives:c,languageISO:a,setLanguageISO:t}),i.a.createElement(C.a,{maxWidth:"xs",className:"container"},void 0!==z&&i.a.createElement(_,{question:I&&k&&void 0!==j[y]&&j[y].question,title:I&&k&&d[w].name,help:I&&k&&d[w].help,onUpdateCard:V,dataIsReady:I,topics:s,normalizedTopics:f,normalizedTopicsMap:d,setCurrentTopic:q,topicFilters:m,setTopicFilters:p,difficulties:g,normalizedDifficulties:v,normalizedDifficultiesMap:E,difficultyFilters:b,setDifficultyFilters:h,currentQuestions:O,currentQuestionsMap:j,currentQuestion:y,setCurrentQuestion:S}),void 0===z&&i.a.createElement(_,{question:j&&y&&j[y]&&j[y].question,title:j&&w&&s[w]&&s[w].name,help:j&&w&&s[w]&&s[w].help,onUpdateCard:V,dataIsReady:I,topics:s,normalizedTopics:f,normalizedTopicsMap:d,setCurrentTopic:q,topicFilters:m,setTopicFilters:p,difficulties:g,normalizedDifficulties:v,normalizedDifficultiesMap:E,difficultyFilters:b,setDifficultyFilters:h,currentQuestions:O,currentQuestionsMap:j,currentQuestion:y,setCurrentQuestion:S}),i.a.createElement("div",{className:"".concat(T.container," wrapper-btn")},i.a.createElement(Z.a,{disabled:L,variant:"contained",size:"large",color:"primary",className:T.flexSpace,onClick:function(){if(void 0!==z&&I){B(!0);var e=x.ref("parties/".concat(z,"/currentQuestion")),t=j[y],a=t.index-1>0?O[t.index-1]:O[O.length-1];e.set(a.questionId,(function(e){e||B(!1)}))}else if(I){var n=j[y],i=n.index+1<O.length?O[n.index-1]:O[O.length-1];S(i.questionId),q(i.topicId)}}},"Prev"),i.a.createElement(Z.a,{disabled:K,variant:"contained",size:"large",color:"primary",className:T.flexSpace,onClick:V},"Random"),i.a.createElement(Z.a,{disabled:G,variant:"contained",size:"large",color:"primary",className:T.flexSpace,onClick:function(){if(void 0!==z&&I){J(!0);var e=x.ref("parties/".concat(z,"/currentQuestion")),t=j[y],a=t.index+1<O.length?O[t.index+1]:O[0];e.set(a.questionId,(function(e){e||J(!1)}))}else if(I){var n=j[y],i=n.index+1<O.length?O[n.index+1]:O[0];S(i.questionId),q(i.topicId)}}},"Next"))))};a(108);var se=function(e){var t=e.createNewParty,a=e.randomCard,n=e.dataIsReady;return i.a.createElement("div",{className:"landing-page"},i.a.createElement(C.a,{maxWidth:"xs",className:"container"},i.a.createElement("h1",null,"Conversation ",i.a.createElement("br",null)," Starters"),i.a.createElement("div",{className:"wrapper-button"},i.a.createElement(Z.a,{size:"large",disabled:!n,fullWidth:!0,variant:"contained",color:"primary",onClick:t},"Create Room"),i.a.createElement(Z.a,{size:"large",disabled:!n,fullWidth:!0,variant:"contained",color:"primary",onClick:a},"Random Card"))))};a(109);var ue=function(){var e=Object(u.e)();return i.a.createElement("div",{className:"admin-page"},i.a.createElement(C.a,{maxWidth:"xs",className:"container"},i.a.createElement("h1",null,"Admin ",i.a.createElement("br",null)," Cards"),i.a.createElement("div",{className:"wrapper-button"},i.a.createElement(Z.a,{size:"large",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return e.push("/edit")}},"Cards"),i.a.createElement(Z.a,{size:"large",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return e.push("/edit")}},"Groups"),i.a.createElement(Z.a,{size:"large",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return e.push("/")}},"Home"))))};function fe(){var e=Object(n.useState)("en"),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(o.a)(c,2),d=s[0],m=s[1],p=Object(n.useState)({}),g=Object(o.a)(p,2),v=g[0],E=g[1],b=Object(n.useState)({}),h=Object(o.a)(b,2),O=h[0],j=h[1],y=i.a.useState({}),S=Object(o.a)(y,2),I=S[0],z=S[1],C=i.a.useState(),T=Object(o.a)(C,2),F=T[0],Q=T[1],k=i.a.useState(),D=Object(o.a)(k,2),M=D[0],N=D[1],w=i.a.useState({}),q=Object(o.a)(w,2),R=q[0],A=q[1],L=i.a.useState(),B=Object(o.a)(L,2),W=B[0],P=B[1],G=i.a.useState(),J=Object(o.a)(G,2),H=J[0],U=J[1],K=Object(n.useState)([]),Y=Object(o.a)(K,2),_=Y[0],V=Y[1],Z=Object(n.useState)(),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ae=i.a.useState(),ne=Object(o.a)(ae,2),ie=ne[0],re=ne[1],ce=i.a.useState(),le=Object(o.a)(ce,2),fe=le[0],de=le[1],me=i.a.useState(),pe=Object(o.a)(me,2),ge=pe[0],ve=pe[1],Ee=Object(n.useState)(!1),be=Object(o.a)(Ee,2),he=be[0],Oe=be[1],je=Object(n.useState)(!1),ye=Object(o.a)(je,2),Se=ye[0],Ie=ye[1],ze=Object(u.e)();function xe(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=!0);return t}function Ce(){he&&(re(void 0),de(xe(R)),ve(xe(I)))}return i.a.useEffect((function(){var e=x.ref("languages");function t(e){var t=e.val();m(t.actives),E(t.isoLangs)}return e.on("value",t,(function(e){console.log("The read failed: "+e.code)})),function(){e.off("value",t)}}),[]),i.a.useEffect((function(){var e=x.ref("app/".concat(a));function t(e){var t=e.val();j(t.questions),z(t.topics),ve(xe(t.topics)),A(t.difficulties),de(xe(t.difficulties))}return e.on("value",t,(function(e){console.log("The read failed: "+e.code)})),function(){e.off("value",t)}}),[a]),i.a.useEffect((function(){if(he&&ge&&fe){var e=[],t={};for(var a in O){var n=O[a];ge[n.topicId]&&fe[n.difficulty]&&e.push(Object(l.a)({},n,{questionId:a}))}e.sort((function(e,t){return I[e.topicId].name>I[t.topicId].name?1:I[e.topicId].name<I[t.topicId].name?-1:0})),e.forEach((function(e,a){e.index=a,t[e.questionId]=Object(l.a)({},e,{index:a})})),V(e),te(t)}}),[he,fe,O,ge,I]),i.a.useEffect((function(){if(he){var e=[],t={};for(var a in I){var n=I[a];e.push(Object(l.a)({},n,{id:a}))}e.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})),e.forEach((function(e,a){e.index=a,t[e.id]=Object(l.a)({},e,{idNormalized:a})})),Q(e),N(t)}}),[I,he]),i.a.useEffect((function(){if(he){var e=[],t={};for(var a in R){var n=R[a];e.push(Object(l.a)({},n,{id:a}))}e.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0})),e.forEach((function(e,a){e.index=a,t[e.difficultyId]=Object(l.a)({},e,{idNormalized:a})})),P(e),U(t)}}),[R,he]),i.a.useEffect((function(){Object.values(v).length>0&&Object.values(O).length>0&&Object.values(I).length>0&&Object.values(R).length>0&&Oe(!0)}),[R,v,O,I]),i.a.useEffect((function(){var e=Object.entries(_).length>0&&ee&&F&&M&&W&&H;Ie(!!e)}),[_,ee,W,H,F,M]),i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{exact:!0,path:"/"},i.a.createElement(se,{dataIsReady:Se,languageISO:a,setLanguageISO:r,languageActives:d,createNewParty:function(){if(Ce(),Se){var e=x.ref("parties").push();ze.push("/room/".concat(e.key));var t=X(_);e.set({currentQuestion:t.questionId,difficulties:xe(R),topics:xe(I)})}},randomCard:function(){Ce(),ze.push("/random")}})),i.a.createElement(u.a,{exact:!0,path:"/edit"},i.a.createElement(f,null)),i.a.createElement(u.a,{exact:!0,path:"/admin"},i.a.createElement(ue,null)),i.a.createElement(u.a,{exact:!0,path:"/room/:id"},i.a.createElement(oe,{setLanguageISO:r,languageISO:a,languages:v,languageActives:d,questions:O,topics:I,normalizedTopics:F,normalizedTopicsMap:M,topicFilters:ge,setTopicFilters:ve,difficulties:R,normalizedDifficulties:W,normalizedDifficultiesMap:H,difficultyFilters:fe,setDifficultyFilters:de,currentQuestions:_,currentQuestionsMap:ee,currentQuestion:ie,setCurrentQuestion:re,dataIsReady:Se})),i.a.createElement(u.a,{exact:!0,path:"/random"},i.a.createElement(oe,{setLanguageISO:r,languageISO:a,languages:v,languageActives:d,questions:O,topics:I,normalizedTopics:F,normalizedTopicsMap:M,topicFilters:ge,setTopicFilters:ve,difficulties:R,normalizedDifficulties:W,normalizedDifficultiesMap:H,difficultyFilters:fe,setDifficultyFilters:de,currentQuestions:_,currentQuestionsMap:ee,currentQuestion:ie,setCurrentQuestion:re,dataIsReady:Se})))}var de=function(){return i.a.createElement(s.a,null,i.a.createElement(fe,null))};c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(de,null)),document.getElementById("root"))},89:function(e,t,a){e.exports=a(110)},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.89b55ba3.chunk.js.map