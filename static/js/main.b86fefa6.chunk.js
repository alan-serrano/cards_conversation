(this.webpackJsonpconversation_cards=this.webpackJsonpconversation_cards||[]).push([[0],{100:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(10),c=a.n(r),l=(a(97),a(15)),o=a(8),s=(a(98),a(34)),u=a(30);var f=function(){return i.a.createElement("div",{className:"edit-page"},"P\xe1gina Edit")},d=a(151),m=a(160),p=(a(99),a(165)),g=a(166),v=a(167),E=a(47),b=a(80),O=a.n(b),h=(a(100),a(156)),j=a(59),y=a.n(j),S=a(172),I=a(158),z=a(157),x=a(153),C=a(154),T=Object(d.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},content:{marginTop:"20px"}}})),F=i.a.forwardRef((function(e,t){return i.a.createElement(x.a,Object.assign({direction:"up",ref:t},e))}));var Q=function(e){var t=e.children,a=e.Icon,n=T(),r=i.a.useState(!1),c=Object(o.a)(r,2),l=c[0],s=c[1],u=function(){s(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{"aria-label":"help",style:{color:"#F44336"},onClick:function(){s(!0)}},i.a.createElement(a,null)),i.a.createElement(S.a,{fullScreen:!0,open:l,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",TransitionComponent:F},i.a.createElement(h.a,{className:n.appBar},i.a.createElement(z.a,null,i.a.createElement(C.a,{edge:"start",color:"inherit",onClick:u,"aria-label":"close"},i.a.createElement(y.a,null)),i.a.createElement(E.a,{variant:"h6",className:n.title},"Help"))),i.a.createElement(I.a,{className:n.content},t)))},k=a(174),M=a(162),D=a(163),N=a(161),q=a(164),w=a(159),L=a(169),A=a(79),R=a.n(A),W=a(78),B=a.n(W),P=a(63),J=a.n(P);J.a.initializeApp({apiKey:"AIzaSyBJmgMqOrcOQBg3-JvswwmqlLCvbIAIoeY",authDomain:"cards-conversation-starters.firebaseapp.com",databaseURL:"https://cards-conversation-starters.firebaseio.com",projectId:"cards-conversation-starters",storageBucket:"cards-conversation-starters.appspot.com",messagingSenderId:"1037492872627",appId:"1:1037492872627:web:9af0f2901b3655cb7357c6",measurementId:"G-HSK36FCQYP"});J.a.auth;var H=J.a.database(),U=Object(d.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},content:{marginTop:"20px"}}})),G=i.a.forwardRef((function(e,t){return i.a.createElement(x.a,Object.assign({direction:"up",ref:t},e))}));function K(e){var t=e.normalizedDifficulties,a=(e.normalizedDifficultiesMap,e.difficultyStates),n=e.setDifficultyStates,r=e.normalizedTopics,c=(e.normalizedTopicsMap,e.topicStates),s=e.setTopicStates,u=i.a.useState(!1),f=Object(o.a)(u,2),d=f[0],p=f[1],g=i.a.useState(!1),v=Object(o.a)(g,2),E=v[0],b=v[1];function O(e,t,a){return e.map((function(e,n){return i.a.createElement(w.a,{control:i.a.createElement(L.a,{checked:t[e.id],onChange:a,name:"".concat(e.id)}),label:e.name,key:n})}))}return i.a.useEffect((function(){Object.values(a).filter((function(e){return e})).length===Object.values(a).length?p(!0):p(!1),Object.values(c).filter((function(e){return e})).length!==Object.values(c).length?b(!1):b(!0)}),[a,c]),i.a.createElement(i.a.Fragment,null,i.a.createElement("form",null,i.a.createElement(m.a,{maxWidth:"xs"},i.a.createElement(k.a,{component:"fieldset"},i.a.createElement(N.a,{component:"legend"},"Select difficulty"),i.a.createElement(M.a,null,i.a.createElement(w.a,{control:i.a.createElement(L.a,{checked:d,onChange:function(e){if(e.target.checked){var t={};for(var i in a)t[i]=!0;n(t)}else{var r={};for(var c in a)r[c]=!1;n(r)}p(e.target.checked)}}),label:"All"}),O(t,a,(function(e){var t=Object(l.a)({},a);t[e.target.name]=e.target.checked,n(t)}))),i.a.createElement(D.a,null)),i.a.createElement(q.a,{light:!0}),i.a.createElement(k.a,{component:"fieldset"},i.a.createElement(N.a,{component:"legend"},"Select topics"),i.a.createElement(M.a,null,i.a.createElement(w.a,{control:i.a.createElement(L.a,{checked:E,onChange:function(e){if(e.target.checked){var t={};for(var a in c)t[a]=!0;console.log(t),s(t)}else{var n={};for(var i in c)n[i]=!1;s(n)}b(e.target.checked)}}),label:"All"}),O(r,c,(function(e){var t=Object(l.a)({},c);t[e.target.name]=e.target.checked,s(t)}))),i.a.createElement(D.a,null)))))}var Y=function(e){var t=e.topics,a=e.normalizedTopics,n=e.normalizedTopicsMap,r=e.topicFilters,c=e.setTopicFilters,s=e.difficulties,f=e.normalizedDifficulties,d=e.normalizedDifficultiesMap,m=e.difficultyFilters,p=e.setDifficultyFilters,g=Object(u.f)().id,v=U(),b=i.a.useState(!1),O=Object(o.a)(b,2),j=O[0],x=O[1],T=i.a.useState(),F=Object(o.a)(T,2),Q=F[0],k=F[1],M=i.a.useState(),D=Object(o.a)(M,2),N=D[0],q=D[1];i.a.useEffect((function(){k(Object(l.a)({},m)),q(Object(l.a)({},r))}),[m,r]);var w=function(){x(!1),k(Object(l.a)({},m)),q(Object(l.a)({},r))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{"aria-label":"settings",style:{color:"#F44336"},onClick:function(){x(!0)}},i.a.createElement(B.a,null)),i.a.createElement(S.a,{fullScreen:!0,open:j,onClose:w,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",TransitionComponent:G},i.a.createElement(h.a,{className:v.appBar},i.a.createElement(z.a,null,i.a.createElement(C.a,{edge:"start",color:"inherit",onClick:w,"aria-label":"close"},i.a.createElement(y.a,null)),i.a.createElement(E.a,{variant:"h6",className:v.title},"Settings"),i.a.createElement(C.a,{edge:"start",color:"inherit",onClick:function(){if(x(!1),void 0!==g){var e=H.ref("parties/".concat(g,"/topics")),t=H.ref("parties/".concat(g,"/difficulties"));e.set(Object(l.a)({},N)),t.set(Object(l.a)({},Q))}else p(Object(l.a)({},Q)),c(Object(l.a)({},N))},"aria-label":"close"},i.a.createElement(R.a,null)))),i.a.createElement(I.a,{className:v.content},i.a.createElement(K,{topics:t,normalizedTopics:a,normalizedTopicsMap:n,topicStates:N,setTopicStates:q,difficulties:s,normalizedDifficulties:f,normalizedDifficultiesMap:d,difficultyStates:Q,setDifficultyStates:k}))))},_=Object(d.a)((function(e){return{root:{},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},flex:{display:"flex",justifyContent:"space-between",alignItems:"center"}}}));var V=function(e){var t=e.question,a=e.title,n=e.help,r=e.topics,c=e.normalizedTopics,l=e.normalizedTopicsMap,o=e.topicFilters,s=e.setTopicFilters,u=e.setCurrentTopic,f=e.difficulties,d=e.normalizedDifficulties,b=e.normalizedDifficultiesMap,h=e.difficultyFilters,j=e.setDifficultyFilters,y=e.currentQuestions,S=e.currentQuestionsMap,I=e.currentQuestion,z=e.setCurrentQuestion,x=_();return i.a.createElement("div",{className:"card-component"},i.a.createElement(p.a,{className:x.root},i.a.createElement(g.a,{classes:{title:x.flex},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(Y,{topics:r,normalizedTopics:c,normalizedTopicsMap:l,topicFilters:o,setTopicFilters:s,setCurrentTopic:u,difficulties:f,normalizedDifficulties:d,normalizedDifficultiesMap:b,difficultyFilters:h,setDifficultyFilters:j,currentQuestions:y,currentQuestionsMap:S,currentQuestion:I,setCurrentQuestion:z}),i.a.createElement(E.a,{variant:"h5"},a),i.a.createElement(Q,{Icon:O.a},i.a.createElement(m.a,{maxWidth:"sm"},n)))}),i.a.createElement(v.a,null,i.a.createElement(E.a,{variant:"body2",color:"textSecondary",component:"p"},t))))},X=a(168),Z=a(81),$=a.n(Z),ee=a(82),te=a.n(ee),ae=a(171),ne=a(173),ie=Object(d.a)((function(e){return{container:{display:"flex",justifyContent:"space-between"}}}));var re=function(e){var t=e.languageActives,a=e.setLanguageISO,n=e.languageISO,r=e.languages,c=ie(),l=Object(u.e)(),s=i.a.useState(),f=Object(o.a)(s,2),d=f[0],p=f[1];function g(e){var t=e.currentTarget.dataset.languageId;a(t),p(null)}return i.a.createElement(h.a,{position:"static"},i.a.createElement(z.a,null,i.a.createElement(m.a,{maxWidth:"xs",className:c.container},i.a.createElement(X.a,{color:"inherit","aria-label":"menu",onClick:function(){return l.push("/")}},i.a.createElement($.a,null)),i.a.createElement(X.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(e){p(e.currentTarget)}},i.a.createElement(te.a,null),i.a.createElement("span",{style:{marginLeft:"0.4em"}},n)),i.a.createElement(ae.a,{id:"languageSelector",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:function(){p(null)}},function(){var e=[];for(var a in t)e.push(i.a.createElement(ne.a,{onClick:g,"data-language-id":a,key:a},i.a.createElement("span",{style:{textTransform:"uppercase",marginRight:"0.5em"}},a),i.a.createElement("span",null,r[a]&&r[a].nativeName)));return e}()))))};function ce(e,t){return Math.floor((t-e+1)*Math.random()+e)}function le(e){return e[ce(0,e.length-1)]}var oe=Object(d.a)((function(e){return{container:{display:"flex",marginTop:"1.2rem",justifyContent:"space-between"},flexSpace:{flexBasis:"calc(33.33% - 0.2rem)"}}}));var se=function(e){var t=e.setLanguageISO,a=e.languageISO,r=e.languages,c=e.languageActives,l=e.questions,s=e.topics,f=e.normalizedTopics,d=e.normalizedTopicsMap,p=e.topicFilters,g=e.setTopicFilters,v=e.difficulties,E=e.normalizedDifficulties,b=e.normalizedDifficultiesMap,O=e.difficultyFilters,h=e.setDifficultyFilters,j=e.currentQuestions,y=e.currentQuestionsMap,S=e.currentQuestion,I=e.setCurrentQuestion,z=e.dataIsReady,x=Object(u.f)().id,C=oe(),T=i.a.useState(),F=Object(o.a)(T,2),Q=F[0],k=F[1],M=i.a.useState(),D=Object(o.a)(M,2),N=D[0],q=D[1],w=i.a.useState(),L=Object(o.a)(w,2),A=L[0],R=L[1],W=i.a.useState(),B=Object(o.a)(W,2),P=B[0],J=B[1],U=i.a.useState(),G=Object(o.a)(U,2),K=G[0],Y=G[1];function _(){if(void 0!==x&&z){Y(!0);var e=H.ref("parties/".concat(x,"/currentQuestion")),t=le(j);e.set(t.questionId,(function(e){e||Y(!1)}))}else if(z){var a=le(j);I(a.questionId),q(a.topicId)}}return i.a.useEffect((function(){R(!z),J(!z),Y(!z)}),[z]),Object(n.useEffect)((function(){if(void 0!==x&&z){var e=H.ref("parties/".concat(x));function t(e){var t=e.val();console.log("------------------"),console.log("party",t),t&&(I(t.currentQuestion),q(l[t.currentQuestion].topicId),h(t.difficulties),g(t.topics),k(!0))}return e.on("value",t,(function(e){console.log("The read failed: "+e.code)})),function(){e.off("value",t)}}}),[z,x,Q,l,I,h,g]),i.a.useEffect((function(){if(void 0===x&&void 0!==j&&void 0!==y&&void 0===S){var e=le(j);I(e.questionId),q(e.topicId)}}),[S,j,y,z,x,I]),i.a.useEffect((function(){if(void 0!==S&&z&&!y.hasOwnProperty(S))if(void 0!==x){var e=H.ref("parties/".concat(x,"/currentQuestion")),t=le(j);e.set(t.questionId)}else{var a=le(j);I(a.questionId),q(a.topicId)}}),[j,y,S]),i.a.createElement("div",{className:"party-page"},i.a.createElement(re,{languages:r,languageActives:c,languageISO:a,setLanguageISO:t}),i.a.createElement(m.a,{maxWidth:"xs",className:"container"},void 0!==x&&i.a.createElement(V,{question:z&&Q&&void 0!==y[S]&&y[S].question,title:z&&Q&&d[N].name,help:z&&Q&&d[N].help,onUpdateCard:_,topics:s,normalizedTopics:f,normalizedTopicsMap:d,setCurrentTopic:q,topicFilters:p,setTopicFilters:g,difficulties:v,normalizedDifficulties:E,normalizedDifficultiesMap:b,difficultyFilters:O,setDifficultyFilters:h,currentQuestions:j,currentQuestionsMap:y,currentQuestion:S,setCurrentQuestion:I}),void 0===x&&i.a.createElement(V,{question:y&&S&&y[S]&&y[S].question,title:y&&N&&s[N]&&s[N].name,help:y&&N&&s[N]&&s[N].help,onUpdateCard:_,topics:s,normalizedTopics:f,normalizedTopicsMap:d,setCurrentTopic:q,topicFilters:p,setTopicFilters:g,difficulties:v,normalizedDifficulties:E,normalizedDifficultiesMap:b,difficultyFilters:O,setDifficultyFilters:h,currentQuestions:j,currentQuestionsMap:y,currentQuestion:S,setCurrentQuestion:I}),i.a.createElement("div",{className:"".concat(C.container," wrapper-btn")},i.a.createElement(X.a,{disabled:A,variant:"contained",size:"large",color:"primary",className:C.flexSpace,onClick:function(){if(void 0!==x&&z){R(!0);var e=H.ref("parties/".concat(x,"/currentQuestion")),t=y[S],a=t.index-1>0?j[t.index-1]:j[j.length-1];e.set(a.questionId,(function(e){e||R(!1)}))}else if(z){var n=y[S],i=n.index+1<j.length?j[n.index-1]:j[j.length-1];I(i.questionId),q(i.topicId)}}},"Prev"),i.a.createElement(X.a,{disabled:K,variant:"contained",size:"large",color:"primary",className:C.flexSpace,onClick:_},"Random"),i.a.createElement(X.a,{disabled:P,variant:"contained",size:"large",color:"primary",className:C.flexSpace,onClick:function(){if(void 0!==x&&z){J(!0);var e=H.ref("parties/".concat(x,"/currentQuestion")),t=y[S],a=t.index+1<j.length?j[t.index+1]:j[0];e.set(a.questionId,(function(e){e||J(!1)}))}else if(z){var n=y[S],i=n.index+1<j.length?j[n.index+1]:j[0];I(i.questionId),q(i.topicId)}}},"Next"))))};a(117);var ue=function(e){var t=e.createNewParty,a=e.randomCard,n=e.dataIsReady;return i.a.createElement("div",{className:"landing-page"},i.a.createElement(m.a,{maxWidth:"xs",className:"container"},i.a.createElement("h1",null,"Party Language ",i.a.createElement("br",null)," Cards"),i.a.createElement("div",{className:"wrapper-button"},i.a.createElement(X.a,{size:"large",disabled:!n,fullWidth:!0,variant:"contained",color:"primary",onClick:t},"New Party"),i.a.createElement(X.a,{size:"large",disabled:!n,fullWidth:!0,variant:"contained",color:"primary",onClick:a},"Random Card"))))};a(118);var fe=function(){var e=Object(u.e)();return i.a.createElement("div",{className:"admin-page"},i.a.createElement(m.a,{maxWidth:"xs",className:"container"},i.a.createElement("h1",null,"Admin ",i.a.createElement("br",null)," Cards"),i.a.createElement("div",{className:"wrapper-button"},i.a.createElement(X.a,{size:"large",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return e.push("/edit")}},"Cards"),i.a.createElement(X.a,{size:"large",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return e.push("/edit")}},"Groups"),i.a.createElement(X.a,{size:"large",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return e.push("/")}},"Home"))))};function de(){var e=Object(n.useState)("en"),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(o.a)(c,2),d=s[0],m=s[1],p=Object(n.useState)({}),g=Object(o.a)(p,2),v=g[0],E=g[1],b=Object(n.useState)({}),O=Object(o.a)(b,2),h=O[0],j=O[1],y=i.a.useState({}),S=Object(o.a)(y,2),I=S[0],z=S[1],x=i.a.useState(),C=Object(o.a)(x,2),T=C[0],F=C[1],Q=i.a.useState(),k=Object(o.a)(Q,2),M=k[0],D=k[1],N=i.a.useState({}),q=Object(o.a)(N,2),w=q[0],L=q[1],A=i.a.useState(),R=Object(o.a)(A,2),W=R[0],B=R[1],P=i.a.useState(),J=Object(o.a)(P,2),U=J[0],G=J[1],K=Object(n.useState)([]),Y=Object(o.a)(K,2),_=Y[0],V=Y[1],X=Object(n.useState)(),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=i.a.useState(),ae=Object(o.a)(te,2),ne=ae[0],ie=ae[1],re=i.a.useState(),ce=Object(o.a)(re,2),oe=ce[0],de=ce[1],me=i.a.useState(),pe=Object(o.a)(me,2),ge=pe[0],ve=pe[1],Ee=Object(n.useState)(!1),be=Object(o.a)(Ee,2),Oe=be[0],he=be[1],je=Object(n.useState)(!1),ye=Object(o.a)(je,2),Se=ye[0],Ie=ye[1],ze=Object(u.e)();function xe(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=!0);return t}function Ce(){Oe&&(ie(void 0),de(xe(w)),ve(xe(I)))}return i.a.useEffect((function(){var e=H.ref("languages");function t(e){var t=e.val();m(t.actives),E(t.isoLangs)}return e.on("value",t,(function(e){console.log("The read failed: "+e.code)})),function(){e.off("value",t)}}),[]),i.a.useEffect((function(){var e=H.ref("app/".concat(a));function t(e){var t=e.val();j(t.questions),z(t.topics),ve(xe(t.topics)),L(t.difficulties),de(xe(t.difficulties))}return e.on("value",t,(function(e){console.log("The read failed: "+e.code)})),function(){e.off("value",t)}}),[a]),i.a.useEffect((function(){if(Oe&&ge&&oe){var e=[],t={};for(var a in h){var n=h[a];ge[n.topicId]&&oe[n.difficulty]&&e.push(Object(l.a)({},n,{questionId:a}))}e.sort((function(e,t){return I[e.topicId].name>I[t.topicId].name?1:I[e.topicId].name<I[t.topicId].name?-1:0})),e.forEach((function(e,a){e.index=a,t[e.questionId]=Object(l.a)({},e,{index:a})})),V(e),ee(t)}}),[Oe,oe,h,ge,I]),i.a.useEffect((function(){if(Oe){var e=[],t={};for(var a in I){var n=I[a];e.push(Object(l.a)({},n,{id:a}))}e.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})),e.forEach((function(e,a){e.index=a,t[e.id]=Object(l.a)({},e,{idNormalized:a})})),F(e),D(t)}}),[I,Oe]),i.a.useEffect((function(){if(Oe){var e=[],t={};for(var a in w){var n=w[a];e.push(Object(l.a)({},n,{id:a}))}e.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0})),e.forEach((function(e,a){e.index=a,t[e.difficultyId]=Object(l.a)({},e,{idNormalized:a})})),B(e),G(t)}}),[w,Oe]),i.a.useEffect((function(){Object.values(v).length>0&&Object.values(h).length>0&&Object.values(I).length>0&&Object.values(w).length>0&&he(!0)}),[w,v,h,I]),i.a.useEffect((function(){var e=Object.entries(_).length>0&&$&&T&&M&&W&&U;Ie(!!e)}),[_,$,W,U,T,M]),i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{exact:!0,path:"/"},i.a.createElement(ue,{dataIsReady:Se,languageISO:a,setLanguageISO:r,languageActives:d,createNewParty:function(){if(Ce(),Se){var e=H.ref("parties").push();ze.push("/party/".concat(e.key));var t=le(_);e.set({currentQuestion:t.questionId,difficulties:xe(w),topics:xe(I)})}},randomCard:function(){Ce(),ze.push("/random")}})),i.a.createElement(u.a,{exact:!0,path:"/edit"},i.a.createElement(f,null)),i.a.createElement(u.a,{exact:!0,path:"/admin"},i.a.createElement(fe,null)),i.a.createElement(u.a,{exact:!0,path:"/party/:id"},i.a.createElement(se,{setLanguageISO:r,languageISO:a,languages:v,languageActives:d,questions:h,topics:I,normalizedTopics:T,normalizedTopicsMap:M,topicFilters:ge,setTopicFilters:ve,difficulties:w,normalizedDifficulties:W,normalizedDifficultiesMap:U,difficultyFilters:oe,setDifficultyFilters:de,currentQuestions:_,currentQuestionsMap:$,currentQuestion:ne,setCurrentQuestion:ie,dataIsReady:Se})),i.a.createElement(u.a,{exact:!0,path:"/random"},i.a.createElement(se,{setLanguageISO:r,languageISO:a,languages:v,languageActives:d,questions:h,topics:I,normalizedTopics:T,normalizedTopicsMap:M,topicFilters:ge,setTopicFilters:ve,difficulties:w,normalizedDifficulties:W,normalizedDifficultiesMap:U,difficultyFilters:oe,setDifficultyFilters:de,currentQuestions:_,currentQuestionsMap:$,currentQuestion:ne,setCurrentQuestion:ie,dataIsReady:Se})))}var me=function(){return i.a.createElement(s.a,null,i.a.createElement(de,null))};c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(me,null)),document.getElementById("root"))},92:function(e,t,a){e.exports=a(119)},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.b86fefa6.chunk.js.map